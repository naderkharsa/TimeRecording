//@ui5-bundle sap/ui/timebookings/Component-preload.js
sap.ui.require.preload({
	"sap/ui/timebookings/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/core/ComponentSupport"],e=>{"use strict";return e.extend("sap.ui.timebookings.Component",{metadata:{manifest:"json"}})});
},
	"sap/ui/timebookings/controller/Main.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/Fragment"],function(t,e,o,n){"use strict";return t.extend("sap.ui.timebookings.controller.Main",{onInit:function(){const t={entry:{start:null,end:null,shortText:"",accountingId:"",accountingText:"",projectId:"",project:""},entries:[],timer:0,start:false};const o=new e(t);o.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay);this.getView().setModel(o);const n=sap.ui.require.toUrl("sap/ui/timebookings/model/projects.json");const i=new e;i.loadData(n,null,false);this.getView().setModel(i,"projectsModel");const r=sap.ui.require.toUrl("sap/ui/timebookings/model/entries.json");const s=new e;s.loadData(r,null,true);s.attachRequestCompleted(()=>{const t=s.getData();if(t&&Array.isArray(t.entries)){o.setProperty("/entries",t.entries)}})},onOpenTimePopup:async function(){const t=this.getView().getModel();let e="";let o="";const i=this.byId("projectSelectMain");if(i){e=i.getSelectedKey();o=i.getSelectedItem()?.getText()||""}t.setProperty("/entry",{start:new Date,end:new Date(Date.now()+30*60*1e3),shortText:"",accountingId:"",accountingText:"",projectId:e,project:o});if(!this._oTimeDialog){this._oTimeDialog=await n.load({id:"timeInfoFragment",name:"sap.ui.timebookings.view.fragment.TimeInfoDialog",controller:this});this._oTimeDialog.setModel(t);this.getView().addDependent(this._oTimeDialog)}t.refresh(true);this._oTimeDialog.open();this.onPopupInputChange()},onPopupAdd:function(){const t=this.getView().getModel();const e=t.getProperty("/entry");const o=t.getProperty("/entries");const n=e.end-e.start;const i=Math.floor(Math.round(n/(1e3*60))/60);const r=Math.round(n/(1e3*60))%60;const s=(i>0?i+"h ":"")+r+"m";const a={start:e.start.toISOString(),end:e.end.toISOString(),shortText:e.shortText,accounting:e.accountingText,accountingId:e.accountingId,project:e.project,projectId:e.projectId,duration:s,date:e.start.toISOString().split("T")[0]};const c=t.getProperty("/editMode");const g=t.getProperty("/editIndex");if(c){o[g]=a;t.setProperty("/editMode",false);t.setProperty("/editIndex",null)}else{o.push(a)}t.setProperty("/entries",o);this._oTimeDialog.close();t.setProperty("/entry",{start:null,end:null,shortText:"",accountingId:"",accountingText:"",projectId:"",project:""})},onStartTimer:function(){const t=this.getView().getModel();const e=t.getProperty("/entry/projectId");if(!e){o.show("WÃ¤hle ein Projekt aus!");return}if(!t.getProperty("/start")){this._startTime=new Date;this._timerInterval=setInterval(()=>{t.setProperty("/timer",t.getProperty("/timer")+1)},1e3);t.setProperty("/start",true)}else{clearInterval(this._timerInterval);this._stopTime=new Date;t.setProperty("/start",false);this._openStopDialog()}},_openStopDialog:function(){if(!this._pStopDialog){n.load({id:this.getView().getId(),name:"sap.ui.timebookings.view.fragment.StopDialog",controller:this}).then(t=>{this._pStopDialog=t;this.getView().addDependent(t);t.open();this._validateStopDialog()})}else{this._pStopDialog.open();this._validateStopDialog()}},onStopConfirm:function(){const t=this.getView().getModel();const e=t.getProperty("/entry");let o=e.projectId;let n=e.project;const i=this.byId("projectSelectMain");if(i){o=i.getSelectedKey();const t=this.getView().getModel("projectsModel");const e=t.getProperty("/projects")||[];const r=e.find(t=>t.projectID===o);n=r?r.project:o}const{start:r,end:s,durationFormatted:a}=this.calculateDuration(this._startTime,this._stopTime);const c={start:r.toISOString(),end:s.toISOString(),shortText:e.shortText,accounting:e.accountingText,accountingId:e.accountingId,project:n,projectId:o,duration:a,date:r.toISOString().split("T")[0]};const g=t.getProperty("/entries")||[];g.unshift(c);t.setProperty("/entries",g);t.setProperty("/entry",{start:null,end:null,shortText:"",accountingId:"",accountingText:"",projectId:"",project:""});t.setProperty("/timer",0);t.setProperty("/start",false);t.refresh(true);this._pStopDialog.close()},onEditEntry:async function(t){const e=this.getView().getModel();const o=t.getSource().getParent().getParent();const i=o.getBindingContext().getPath();const r=parseInt(i.split("/").pop(),10);const s=e.getProperty(i);e.setProperty("/entry",{start:new Date(s.start),end:new Date(s.end),shortText:s.shortText,accountingText:s.accounting,accountingId:s.accountingId,project:s.project,projectId:s.projectId});e.setProperty("/editMode",true);e.setProperty("/editIndex",r);if(!this._oTimeDialog){this._oTimeDialog=await n.load({id:"timeInfoFragment",name:"sap.ui.timebookings.view.fragment.TimeInfoDialog",controller:this});this.getView().addDependent(this._oTimeDialog)}this._oTimeDialog.open()},onDeleteEntry:function(t){const e=this.getView().getModel();const o=t.getSource().getBindingContext();const n=o.getPath();const i=parseInt(n.split("/").pop(),10);const r=[...e.getProperty("/entries")];r.splice(i,1);e.setProperty("/entries",r)},onPopupCancel:function(){this._oTimeDialog.close()},onStopCancel:function(){this._pStopDialog.close()},onPopupInputChange:function(t){const e=this.getView().getModel();const o=e.getProperty("/entry");const n=t?.getSource?.();const i=n?.getId?.()||"";if(i.includes("shortTextInput")){e.setProperty("/entry/shortText",n.getValue())}if(i.includes("projectSelect")){const t=n.getSelectedKey();const o=n.getSelectedItem()?.getText();e.setProperty("/entry/projectId",t);e.setProperty("/entry/project",o)}if(i.includes("accountingSelect")){const t=n.getSelectedKey();const o=n.getSelectedItem()?.getText();e.setProperty("/entry/accountingId",t);e.setProperty("/entry/accountingText",o)}const r=o.start instanceof Date&&!isNaN(o.start);const s=o.end instanceof Date&&!isNaN(o.end);const a=typeof o.shortText==="string"&&o.shortText.trim().length>0;const c=typeof o.projectId==="string"&&o.projectId.trim().length>0;const g=typeof o.accountingId==="string"&&o.accountingId.trim().length>0;const p=r&&s&&a&&c&&g;const d=sap.ui.core.Fragment.byId("timeInfoFragment","addBtn");if(d){d.setEnabled(p)}this._validateStopDialog?.()},_validateStopDialog:function(){const t=this.getView().getModel();const e=t.getProperty("/entry");const o=sap.ui.core.Fragment.byId(this.getView().getId(),"okBtn");const n=e.shortText&&e.shortText.trim().length>0;const i=e.accountingId&&e.accountingId.trim().length>0;if(o){o.setEnabled(!!(n&&i))}},formatHours:function(t){return t!==undefined?String(Math.floor(t/3600)).padStart(2,"0"):"00"},formatMinutes:function(t){return t!==undefined?String(Math.floor(t%3600/60)).padStart(2,"0"):"00"},formatSeconds:function(t){return t!==undefined?String(t%60).padStart(2,"0"):"00"},formatButtonType:function(t){return t?"Negative":"Default"},calculateDuration:function(t,e){const o=e-t;const n=Math.round(o/(1e3*60));const i=Math.floor(n/60);const r=n%60;const s=(i>0?i+"h ":"")+r+"m";return{start:t,end:e,durationFormatted:s}},getGroupHeader:function(t){return new sap.m.GroupHeaderListItem({title:"Datum: "+t.key,upperCase:false})}})});
},
	"sap/ui/timebookings/i18n/i18n.properties":'appTitle=Time Recording App\n',
	"sap/ui/timebookings/i18n/i18n_de.properties":'appTitle=Zeiterfassung App\n',
	"sap/ui/timebookings/i18n/i18n_en.properties":'appTitle=Time recording app\n',
	"sap/ui/timebookings/manifest.json":'{"_version":"1.1.0","sap.app":{"id":"sap.ui.timebookings","type":"application","title":"Time Recording App"},"sap.ui":{"_version":"1.1.0","technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"dependencies":{"minUI5Version":"1.121.0","libs":{"sap.ui.core":{},"sap.m":{},"sap.f":{}}},"rootView":{"viewName":"sap.ui.timebookings.view.Main","type":"XML","id":"app"},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"sap.ui.timebookings.i18n.i18n","async":true}},"":{"type":"sap.ui.model.json.JSONModel","uri":"model/entries.json"}},"resources":{"css":[{"uri":"css/styles.css"}]}}}',
	"sap/ui/timebookings/util/Helper.js":function(){
sap.ui.define(["require"],e=>{"use strict";return{resolvePath(r){return e.toUrl("../")+r}}});
},
	"sap/ui/timebookings/view/Main.view.xml":'<mvc:View controllerName="sap.ui.timebookings.controller.Main"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:core="sap.ui.core"\n\txmlns="sap.m"\n\txmlns:f="sap.f"\n\tdisplayBlock="true"><App><Page><customHeader><f:ShellBar title="Zeiterfassung" class="myBigShellTitle" /></customHeader><content><f:DynamicPage><f:header><f:DynamicPageHeader pinnable="false"><HBox justifyContent="Start" alignItems="Center" class="sapUiSmallMargin"><Select\n\t\t\t\t\t\t\t\t\tid="projectSelectMain"\n\t\t\t\t\t\t\t\t\tforceSelection="false"\n\t\t\t\t\t\t\t\t\twidth="20rem"\n\t\t\t\t\t\t\t\t\tclass="projectDropdown"\n\t\t\t\t\t\t\t\t\tchange=".onProjectChange"\n\t\t\t\t\t\t\t\t\tselectedKey="{/entry/projectId}"\n\t\t\t\t\t\t\t\t\titems="{ path: \'projectsModel>/projects\' }"><core:Item key="{projectsModel>projectID}" text="{projectsModel>project}" /></Select><Button\n\t\t\t\t\t\t\t\t\ttext="{= ${/start} ? \'Stop\' : \'Start\' }"\n\t\t\t\t\t\t\t\t\ticon="{= ${/start} ? \'sap-icon://media-pause\' : \'sap-icon://media-play\' }"\n\t\t\t\t\t\t\t\t\ttype="{ path: \'/start\', formatter: \'.formatButtonType\' }"\n\t\t\t\t\t\t\t\t\tpress=".onStartTimer" /><Button icon="sap-icon://add" type="Default" class="plusBtn sapUiTinyMarginBegin" press=".onOpenTimePopup" /><HBox id="timerDisplay" alignItems="Center" class="sapUiTinyMarginBegin"><Text text="{parts: [{ path: \'/timer\' }], formatter: \'.formatHours\'}" class="timerFace" /><Text text=":" /><Text text="{parts: [{ path: \'/timer\' }], formatter: \'.formatMinutes\'}" class="timerFace" /><Text text=":" /><Text text="{parts: [{ path: \'/timer\' }], formatter: \'.formatSeconds\'}" class="timerFace" /></HBox></HBox></f:DynamicPageHeader></f:header><f:content><List\n\t\t\t\t\t\t\tid="entryList"\n\t\t\t\t\t\t\titems="{\n\t\t\t\t\t\t\t\tpath: \'/entries\',\n\t\t\t\t\t\t\t\tsorter: { path: \'date\', descending: false },\n\t\t\t\t\t\t\t\tgroupHeaderFactory: \'.getGroupHeader\'\n\t\t\t\t\t\t\t}"\n\t\t\t\t\t\t\theaderText="Erfasste Zeiten"\n\t\t\t\t\t\t\tgrowing="true"\n\t\t\t\t\t\t\tgrowingScrollToLoad="true"><CustomListItem><VBox class="entryBox"><HBox alignItems="Center" justifyContent="SpaceBetween"><Text text="Projekt: {project}" class="entryProjectTitle" /><HBox justifyContent="End" alignItems="Center"><Button icon="sap-icon://edit" press=".onEditEntry" /><Button icon="sap-icon://delete" press=".onDeleteEntry" /></HBox></HBox><Text text="{shortText}" class="entryDescription" wrapping="true" /><HBox justifyContent="SpaceBetween" alignItems="Center"><Text text="{duration}" class="entryDuration sapUiTinyMarginBegin" /><Text text="{accounting}" class="entryAccounting" /><Text text="{date}" class="entryDate" /></HBox></VBox></CustomListItem></List></f:content></f:DynamicPage></content><footer><OverflowToolbar><ToolbarSpacer /><Button text="ZurÃ¼cksetzen" icon="sap-icon://undo" type="Reject" press=".onCancel" /><Button text="Speichern" icon="sap-icon://save" type="Emphasized" press=".onSave" /></OverflowToolbar></footer></Page></App></mvc:View>\n',
	"sap/ui/timebookings/view/fragment/StopDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n  xmlns:core="sap.ui.core"><Dialog id="StopDialog" title="Arbeitsbeschreibung"><VBox class="sapUiSmallMargin"><Text text="Beschreibe deine Arbeit" /><Input id="shortTextInput" value="{/entry/shortText}" placeholder="Short Text" liveChange=".onDescriptionChange" class="sapUiTinyMarginBottom" /><Label text="Accounting Indicator:" /><Select id="accountingSelect" selectedKey="{/entry/accountingId}" forceSelection="false" change=".onPopupInputChange"><core:Item key="01" text="01 - Vor Ort" /><core:Item key="02" text="02 - Remote" /></Select></VBox><beginButton><Button id="okBtn" text="OK" press=".onStopConfirm" enabled="false" /></beginButton><endButton><Button text="Abbrechen" press=".onStopCancel" /></endButton></Dialog></core:FragmentDefinition>\n',
	"sap/ui/timebookings/view/fragment/TimeInfoDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:l="sap.ui.layout"><Dialog id="TimeInfoDialog" title="Details zur Zeitaufzeichnung" draggable="true" resizable="true" contentWidth="25rem"><VBox class="sapUiSmallMargin"><Label text="Projekt" /><Select id="projectSelectPopup" selectedKey="{/entry/projectId}" width="20rem" forceSelection="false" class="projectDropdown" change=".onPopupInputChange" items="{ path: \'projectsModel>/projects\' }"><items><core:Item key="{projectsModel>projectID}" text="{projectsModel>project}" /></items></Select><HBox class="sapUiSmallMarginTop"><VBox class="sapUiTinyMarginEnd"><Label text="Startzeit" /><DateTimePicker id="startPicker" value="{\n    \t\t\t\t\t\t\t\tpath: \'/entry/start\',\n    \t\t\t\t\t\t\t\ttype: \'sap.ui.model.type.DateTime\',\n    \t\t\t\t\t\t\t\tformatOptions: { pattern: \'yyyy-MM-dd HH:mm\' }\n\t\t\t\t\t                }" change=".onPopupInputChange" class="sapUiSmallMarginBottom" /></VBox><VBox class="sapUiTinyMarginBegin"><Label text="Endzeit" /><DateTimePicker id="endPicker" value="{\n    \t\t\t\t\t\t\t\tpath: \'/entry/end\',\n    \t\t\t\t\t\t\t\ttype: \'sap.ui.model.type.DateTime\',\n    \t\t\t\t\t\t\t\tformatOptions: { pattern: \'yyyy-MM-dd HH:mm\' }\n\t\t\t\t\t                }" change=".onPopupInputChange" class="sapUiSmallMarginBottom" /></VBox></HBox><Label text="Accounting Indicator" class="sapUiSmallMarginTop" /><Select id="accountingSelectPopup" selectedKey="{/entry/accountingId}" forceSelection="false" change=".onPopupInputChange"><core:Item key="01" text="01 - Vor Ort" /><core:Item key="02" text="02 - Remote" /></Select><Label text="Short Text" class="sapUiSmallMarginTop" /><Input id="shortTextInput2" value="{/entry/shortText}" liveChange=".onPopupInputChange" /><HBox alignItems="Center" justifyContent="SpaceBetween" class="sapUiSmallMarginTop"><Button text="Cancel" type="Reject" press=".onPopupCancel" /><Button id="addBtn" text="Add" type="Accept" press=".onPopupAdd" class="sapUiTinyMarginBegin" enabled="false" /></HBox></VBox></Dialog></core:FragmentDefinition>\n'
});
//# sourceMappingURL=Component-preload.js.map
